<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="https://www.huana-nbp.go.th/index/add_file/P0D284NMon35557.png" type="image/png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <!-- ****** Auto Complete ********* -->
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery-ui.autocomplete.scroll@0.1.9/jquery.ui.autocomplete.scroll.min.js"></script>

    <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏•‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå ‡∏≠‡∏ö‡∏ï.‡∏Ç‡πà‡∏≤‡πÉ‡∏´‡∏ç‡πà</title>

    <!-- ****** Style CSS ********* -->
    <style>
        input#employee {
            width: 282px;
            height: 60px;
            background-color: brown;
            color: yellow;
            margin-block-start: 5px;
            border-radius: 36px;
            font-size: 20px;
        }

        div#showtxt {
            font-size: 27px;
            margin-top: 20px;
        }

        @font-face {
            font-family: 'Digital dream Fat';
            src: url('https://semicon.github.io/fonts/DigitaldreamFat.woff2') format('woff2'),
                 url('https://semicon.github.io/fonts/DigitaldreamFat.woff') format('woff');
            font-weight: normal;
            font-style: normal;
            font-display: swap;
        }

        @import url('https://fonts.googleapis.com/css2?family=K2D&family=Kanit&family=Sriracha&display=swap');

        * {
            margin: 0px;
            padding: 0px;
            box-sizing: border-box;
            font-family: 'K2D', sans-serif;
        }

        body {
            font-family: 'Kanit', sans-serif;
            color: #444;
            background-color: white;
            padding: 20px;
            border: 2px solid white;
            box-shadow: 0px 8px 10px rgba(0, 0, 0, 0.5);
            font-size: 1.05rem;
            min-height: 100vh;
            display: grid;
            place-items: center;
            background-color: #92a8d1;
            background: url("https://www.i-pic.info/i/BbiN536436.jpg") no-repeat center center fixed;
            -webkit-background-size: cover;
            -moz-background-size: cover;
            -o-background-size: cover;
            background-size: cover;
        }

        input#employee {
            font-family: 'Kanit', sans-serif;
            width: 282px;
            height: 60px;
            background-color: brown;
            color: yellow;
            margin-block-start: 5px;
            border-radius: 36px;
            font-size: 20px;
        }

        .site-logo {
            content: url("https://www.huana-nbp.go.th/index/add_file/P0D284NMon35557.png");
            display: inline-block;
            margin-top: 20px;
            width: auto;
            height: 100px;
        }

        .msgBg {
            background-color: transparent;
        }

        .wrapper {
            background: rgba(221, 255, 255, 0.7);
            width: 350px;
            padding: 20px;
            border: 1px solid #999;
            border-radius: 5px;
            box-shadow: 0px 15px 20px rgba(0, 0, 0, 0.1);
        }

        /** #### digital clock #### **/
        .clock {
            font-family: Digital dream Fat;
            font-size: 28px;
            color: #00f6fa;
            letter-spacing: 3px;
            text-shadow: 1px 1px 2px teal, 0 0 25px green, 0 0 5px #00fbff;
            min-width: 98%;
            background: #444;
            padding: 5px 0px 5px 10px;
            display: inline-block;
            border: 3px solid #ccc;
            border-radius: 2px;
            outline-style: solid;
            outline-color: #999;
        }

        .status-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-left: 10px;
        }

        .status-online {
            background-color: #28a745;
            animation: pulse 2s infinite;
        }

        .status-offline {
            background-color: #dc3545;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .version-info {
            position: fixed;
            bottom: 10px;
            right: 10px;
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.7);
            background: rgba(0, 0, 0, 0.3);
            padding: 5px 10px;
            border-radius: 15px;
        }
    </style>
</head>

<!-- ******* Time Tracker HTML Body *********** -->
<body>
    <div class="wrapper text-center" style="max-width:350px">
        <div class="site-logo text-center"></div>
        <h5>‡∏£‡∏∞‡∏ö‡∏ö‡∏•‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå ‡∏≠‡∏ö‡∏ï.‡∏Ç‡πà‡∏≤‡πÉ‡∏´‡∏ç‡πà</h5>
        <small>
            <span id="connection-status">üîÑ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠...</span>
            <span id="status-indicator" class="status-indicator"></span>
        </small>

        <span id="MyClockDisplay" class="clock mt-3" onload="showTime()"></span>

        <form id="myForm">
            <div class="row mt-4">
                <div class="form-group col">
                    <label for="employee">‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™ </label>
                    <input id="employee" class="text-center"> <br>
                </div>
            </div>

            <div class="row mt-4">
                <div class="form-group col">
                    <label for="lblinfo"><i class="fas fa-book-reader"></i> ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°/‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏° ‡∏≠‡∏∑‡πà‡∏ô‡πÜ</label>
                    <input type="search" class="form-control form-control-lg" id="userinfo" name="userinfo" list="list">
                    <datalist id="list">
                        <option value="‡πÑ‡∏õ‡∏£‡∏≤‡∏ä‡∏Å‡∏≤‡∏£">‡πÑ‡∏õ‡∏£‡∏≤‡∏ä‡∏Å‡∏≤‡∏£</option>
                        <option value="‡∏•‡∏≤‡∏Å‡∏¥‡∏à">‡∏•‡∏≤‡∏Å‡∏¥‡∏à</option>
                        <option value="‡∏•‡∏≤‡∏õ‡πà‡∏ß‡∏¢">‡∏•‡∏≤‡∏õ‡πà‡∏ß‡∏¢</option>
                        <option value="‡∏•‡∏≤‡∏Ñ‡∏•‡∏≠‡∏î">‡∏•‡∏≤‡∏Ñ‡∏•‡∏≠‡∏î</option>
                    </datalist>
                </div>
            </div>

            <div class="row mt-4 g-2">
                <div class="col-6">
                    <button id="clockin" type="button" class="btn btn-lg btn-primary w-100">Clock In</button>
                </div>
                <div class="col-6">
                    <button id="clockout" type="button" class="btn btn-lg btn-warning w-100">Clock Out</button>
                </div>
            </div>

            <div class="row mt-4">
                <div class="form-group col">
                    <div class="alert" role="alert" id="message"></div>
                </div>
            </div>
        </form>
    </div>

    <!-- Version info -->
    <div class="version-info">
        <span id="app-version">v2.0.0</span> | 
        <span id="server-status">Render</span>
    </div>

    <script src="https://unpkg.com/vconsole@latest/dist/vconsole.min.js"></script>
    <script>
        // VConsole ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö debug (‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏â‡∏û‡∏≤‡∏∞ development)
        // var vConsole = new window.VConsole();
    </script>

    <!-- ******* Javascript *********** -->
    <script>
        // ===== Configuration =====
        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô production ‡∏´‡∏£‡∏∑‡∏≠ development
        var isProduction = window.location.hostname !== 'localhost' && window.location.hostname !== '127.0.0.1';
        var apiUrl = isProduction ? 
            window.location.origin + '/api' : 
            'http://localhost:3000/api';
        
        var owner = '‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏≥‡∏ö‡∏•‡∏Ç‡πà‡∏≤‡πÉ‡∏´‡∏ç‡πà';
        var connectionRetryCount = 0;
        var maxRetries = 3;

        console.log('üåê API URL:', apiUrl);
        console.log('üè¢ Environment:', isProduction ? 'Production' : 'Development');

        /** ******* ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏ô‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏°‡∏≤‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô‡πÅ‡∏ñ‡∏ö‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ ******* **/
        var profile, gps;

        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö server
        async function checkServerConnection() {
            try {
                const response = await fetch(apiUrl + '/health');
                const data = await response.json();
                
                if (response.ok && data.status === 'healthy') {
                    updateConnectionStatus('üü¢ ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÅ‡∏•‡πâ‡∏ß', 'online');
                    connectionRetryCount = 0;
                    return true;
                } else {
                    throw new Error('Server unhealthy');
                }
            } catch (error) {
                console.error('‚ùå Connection check failed:', error);
                updateConnectionStatus('üî¥ ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏î‡πâ', 'offline');
                
                // ‡∏•‡∏≠‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÉ‡∏´‡∏°‡πà
                if (connectionRetryCount < maxRetries) {
                    connectionRetryCount++;
                    setTimeout(checkServerConnection, 5000);
                    updateConnectionStatus(`üîÑ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà... (${connectionRetryCount}/${maxRetries})`, 'offline');
                }
                
                return false;
            }
        }

        function updateConnectionStatus(message, status) {
            document.getElementById('connection-status').textContent = message;
            const indicator = document.getElementById('status-indicator');
            indicator.className = `status-indicator status-${status}`;
        }

        $.when(getlocation()).done(function (res) {
            console.log('üìç Location obtained:', gps);
        });

        $(document).ready(function () {
            let profile = null;

            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡πà‡∏≠‡∏ô
            checkServerConnection();

            $('#clockin').click(() => ClockIn());
            $('#clockout').click(() => ClockOut());

            // ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡∏°‡∏µ LIFF ‡πÑ‡∏´‡∏° (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö LINE)
            if (typeof liff !== 'undefined') {
                liff.init({
                    liffId: '2000498666-QpjPNOd6',
                    withLoginOnExternalBrowser: true
                });

                liff.ready.then(() => {
                    profile = liff.getDecodedIDToken();

                    if (profile) {
                        console.log("üöÄ LINE Profile loaded:", profile.name);
                    } else {
                        console.log("‚ö†Ô∏è No LINE profile available");
                    }

                    initApp();
                });
            } else {
                console.log("‚ö†Ô∏è LIFF not available, using fallback");
                profile = {
                    name: '‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô',
                    picture: ''
                };
                initApp();
            }

            function initApp() {
                document.getElementById('message').innerText = owner;
                document.getElementById('message').className = 'alert msgBg';
                
                loadEmployees();
            }
        });

        async function loadEmployees() {
            try {
                const response = await fetch(apiUrl + '/employees', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({})
                });

                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}`);
                }

                const data = await response.json();
                
                if (data.success) {
                    var dataPerson = data.data;
                    console.log('üë• Employees loaded:', dataPerson.length);
                    
                    $(function () {
                        $("#employee").autocomplete({
                            maxShowItems: 3,
                            source: dataPerson
                        });
                    });
                } else {
                    throw new Error(data.error || 'Failed to load employees');
                }

            } catch (error) {
                console.error('‚ùå Failed to load employees:', error);
                $('#message').html('‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ');
                document.getElementById("message").className = "alert alert-warning";
            }
        }

        /** ******* Clock In *********** **/
        async function ClockIn() {
            event.preventDefault();
            
            var employee = document.getElementById("employee").value;
            var userinfo = document.getElementById("userinfo").value;

            if (employee != '') {
                $('#message').html("<span class='spinner-border spinner-border-sm text-primary'></span> ‡πÇ‡∏õ‡∏£‡∏î‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà ...!");
                
                try {
                    // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
                    if (typeof liff !== 'undefined' && liff.isLoggedIn()) {
                        profile = liff.getDecodedIDToken();
                    }

                    const response = await fetch(apiUrl + '/clockin', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            employee,
                            userinfo,
                            lat: gps[0],
                            lon: gps[1],
                            line_name: profile ? profile.name : '‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô',
                            line_picture: profile ? profile.picture : ''
                        })
                    });

                    const result = await response.json();
                    console.log('‚è∞ Clock In result:', result);
                    
                    if (result.success) {
                        setTimeout(() => {
                            var message = result.employee + '<br> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏ß‡∏•‡∏≤‡∏°‡∏≤ ' + result.time;
                            $('#message').html(message);
                            document.getElementById("message").className = "alert alert-primary";
                            clearForm();
                        }, 500);
                    } else {
                        var message = result.employee + ' ' + result.message;
                        $('#message').html(message);
                        document.getElementById("message").className = "alert alert-warning";
                        clearForm();
                    }

                } catch (error) {
                    console.error('‚ùå Clock in error:', error);
                    $('#message').html('‚ö†Ô∏è ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á');
                    document.getElementById("message").className = "alert alert-danger";
                    clearForm();
                }
            } else {
                $('#message').html('‚ö†Ô∏è ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô ...!');
                document.getElementById('message').className = 'alert alert-warning text-danger';
                clearForm();
            }
        }

        /** ******* Clock Out *********** **/
        async function ClockOut() {
            event.preventDefault();
            
            var employee = document.getElementById("employee").value;

            if (employee != '') {
                $('#message').html("<span class='spinner-border spinner-border-sm text-warning'></span> ‡πÇ‡∏õ‡∏£‡∏î‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà ...!");
                
                try {
                    // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
                    if (typeof liff !== 'undefined' && liff.isLoggedIn()) {
                        profile = liff.getDecodedIDToken();
                    }

                    const response = await fetch(apiUrl + '/clockout', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            employee,
                            lat: gps[0],
                            lon: gps[1],
                            line_name: profile ? profile.name : '‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô',
                            line_picture: profile ? profile.picture : ''
                        })
                    });

                    const result = await response.json();
                    console.log('‚è∞ Clock Out result:', result);
                    
                    if (result.success) {
                        setTimeout(() => {
                            var message = result.employee + '<br> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏ß‡∏•‡∏≤‡∏Å‡∏•‡∏±‡∏ö ' + result.time;
                            if (result.hours) {
                                message += '<br>‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏£‡∏ß‡∏° ' + result.hours + ' ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á';
                            }
                            $('#message').html(message);
                            document.getElementById("message").className = "alert alert-primary";
                            clearForm();
                        }, 500);
                    } else {
                        var message = result.employee + ' ' + result.message;
                        $('#message').html(message);
                        document.getElementById("message").className = "alert alert-warning";
                        clearForm();
                    }

                } catch (error) {
                    console.error('‚ùå Clock out error:', error);
                    $('#message').html('‚ö†Ô∏è ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á');
                    document.getElementById("message").className = "alert alert-danger";
                    clearForm();
                }
            } else {
                $('#message').html("‚ö†Ô∏è ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô ...!");
                document.getElementById("message").className = "alert alert-warning text-danger";
                clearForm();
            }
        }

        /** ********* ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏≤‡∏á‡∏†‡∏π‡∏°‡∏¥‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå - ‡∏•‡∏∞‡∏ï‡∏¥‡∏à‡∏π‡∏î/‡∏•‡∏≠‡∏á‡∏à‡∏¥‡∏à‡∏π‡∏î ******** **/
        function getlocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(showPosition, getLocationFromApi);
            } else {
                console.log("‚ùå Geolocation is not supported by this browser.");
                getLocationFromApi();
            }
        }

        function showPosition(position) {
            var lat = position.coords.latitude;
            var lon = position.coords.longitude;
            gps = [lat, lon];
            console.log("üìç GPS Location:", gps);
        }

        function getLocationFromParameter() {
            var url = new URL(window.location.href);
            var lat = url.searchParams.get("lat");
            var lon = url.searchParams.get("lon");
            if (lat && lon) {
                gps = [lat, lon];
                console.log("üìç URL Parameters Location:", gps);
            }
        }

        function getLocationFromApi() {
            $.getJSON('https://ipapi.co/json/', function (data) {
                var lat = data.latitude;
                var lon = data.longitude;
                gps = [lat, lon];
                console.log("üìç IP-based Location:", gps);
                return gps;
            }).fail(function() {
                // Fallback location (‡∏≠‡∏ö‡∏ï.‡∏Ç‡πà‡∏≤‡πÉ‡∏´‡∏ç‡πà)
                gps = [14.0583, 100.6014];
                console.log("üìç Fallback Location:", gps);
            });
        }

        /** ******* ‡∏•‡πâ‡∏≤‡∏á‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ******** **/
        function clearForm() {
            setTimeout(function () {
                document.getElementById('message').innerText = owner;
                document.getElementById("message").className = "alert msgBg";
                document.getElementById("myForm").reset();
            }, 5000);
        }

        /** ‡∏à‡∏≤‡∏ß‡∏≤‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå ‡∏ô‡∏≤‡∏¨‡∏¥‡∏Å‡∏≤‡∏î‡∏¥‡∏à‡∏¥‡∏ï‡∏≠‡∏• **/
        function showTime() {
            var date = new Date();
            var h = date.getHours();
            var m = date.getMinutes();
            var s = date.getSeconds();
            var dot = document.textContent = '.';

            if (s % 2 == 1) {
                dot = document.textContent = '.';
            } else {
                dot = document.textContent = '\xa0';
            }

            h = h < 10 ? "0" + h : h;
            m = m < 10 ? "0" + m : m;
            s = s < 10 ? "0" + s : s;

            var time = h + ":" + m + ":" + s + '' + dot;
            document.getElementById("MyClockDisplay").innerText = time;
            document.getElementById("MyClockDisplay").textContent = time;

            setTimeout(showTime, 1000);
        }

        // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
        showTime();
        
        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏ó‡∏∏‡∏Å 30 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
        setInterval(checkServerConnection, 30000);
    </script>
    
    <!-- LIFF SDK (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö LINE) -->
    <script charset="utf-8" src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
</body>
</html>